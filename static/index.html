<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Watson Speech to Text client example</title>
    <link rel="stylesheet" href="style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>

<body>
    <div class="container">

        <section>
            <h2>Transcribe from Microphone</h2>
            <button id="button">Start Microphone Transcription</button>
            <button id="stop">Stop</button>

            <h2>Output:</h2>
            <div id="output">--</div>
        </section>

        <script src="bower_components/watson-speech/dist/watson-speech.js"></script>
        <!-- window.fetch pollyfill for IE/Edge & Older Chrome/FireFox -->
        <script src="bower_components/fetch/fetch.js"></script>

        <div id="player"></div>

        <script>
          var tag = document.createElement("script")

          tag.src = "https://www.youtube.com/iframe_api"
          var firstScriptTag = document.getElementsByTagName('script')[0]
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

          var player;
          function onYouTubeIframeAPIReady(){
            player = new YT.Player('player', {
              height: '390',
              width: '640',
              videoId: 'M7lc1UVf-VE',
              events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
              }
            })
          }

          function onPlayerReady(event){
            event.target.playVideo();
          }

          var done = false;
          function onPlayerStateChange(){
            console.log("State Changed")
            if(event.data == YT.PlayerState.PLAYING && !done){
              setTimeout(stopVideo, 6000)
              done = true
            }
          }
          function stopVideo(){
            player.stopVideo()
          }

        </script>

    </div>
</body>

</html>
